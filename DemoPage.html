<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>Редактирование пользователей</title>

	<link href="./DemoFiles/main.css" rel="stylesheet" type="text/css">
	<link href="./DemoFiles/jquery-ui.css" rel="stylesheet" type="text/css">

	<script src="./DemoFiles/jquery-1.4.2.js" type="text/javascript"></script>
	<script src="./DemoFiles/jquery-ui-1.8.6.js" type="text/javascript"></script>
	<script src="./DemoFiles/jquery.tmpl.js" type="text/javascript"></script>
	<script src="./DemoFiles/knockout-1.2.1.js" type="text/javascript"></script>
	<script src="./DemoFiles/knockout.jqueryui.js" type="text/javascript"></script>
	<script src="./DemoFiles/knockout.mapping.js" type="text/javascript"></script>
	<script src="./DemoFiles/Page.js" type="text/javascript"></script>

</head>
<body>

<h2>Список пользователей</h2>

<div data-bind="jqueryui : 'buttonset'">
	<button data-bind="click: createUser">Добавить</button>
	<button data-bind="click: deleteSelectedUser, enable: selectedUser() !== null">Удалить</button>
</div>

<div id="UserListTable">
	<div>
		<table class="list">
			<thead>
				<tr>
					<th>ФИО</th>
					<th>Логин</th>
				</tr>
			</thead>
			<tbody data-bind="template: {name: 'editUsersRow', foreach: users,
								templateOptions: { current: selectedUser } }">
			</tbody>
		</table>
	</div>
</div>

<script type="text/html" id="editUsersRow">
	<tr data-bind="attr: { 'data-id': Id }, click: select, css: { selected: $data == $item.current() }">
		<td><a href="#" data-bind="text: FIO, click: edit"></a></td>
		<td data-bind="text: Login"></td>
	</tr>
</script>

<script type="text/html" id="editUserDlg">
	<div>
		<table>
			<tbody>
			<tr>
				<th><label for="surname">Фамилия:</label></th>
				<td><input maxlength="20" name="surname"
				           data-bind="value: Surname" type="text" value=""></td>
			</tr>
			<tr>
				<th class="property"><label for="firstname">Имя:</label></th>
				<td><input maxlength="20"
				           data-bind="value: FirstName" name="firstname" type="text"></td>
			</tr>
			<tr>
				<th class="property"><label for="patronymicname">Отчество:</label></th>
				<td><input maxlength="20" name="patronymicname"
				           data-bind="value: PatronymicName" type="text" value=""></td>
			</tr>
			<tr>
				<th class="property"><label for="email">E-Mail:</label></th>
				<td><input maxlength="30" name="email"
				           data-bind="value: EMail" type="text" value=""></td>
			</tr>
			<tr>
				<th class="property"><label for="login">Логин:</label></th>
				<td><input maxlength="20" name="login"
				           data-bind="value: Login" type="text" value=""></td>
			</tr>

			</tbody>
		</table>
	</div>
</script>

</body>
</html>